<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot BridgeMind Games</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* BotÃ³n flotante del chatbot */
        #chatbot-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        #chatbot-button:hover {
            transform: scale(1.1);
        }

        #chatbot-button svg {
            width: 30px;
            height: 30px;
            fill: white;
        }

        /* Ventana del chatbot */
        #chatbot-window {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            z-index: 1001;
            overflow: hidden;
        }

        #chatbot-window.active {
            display: flex;
        }

        /* Header del chatbot */
        #chatbot-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #chatbot-header h3 {
            font-size: 16px;
            font-weight: 600;
        }

        #close-chat {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            line-height: 1;
        }

        /* Ãrea de mensajes */
        #chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: #f5f5f5;
        }

        .message {
            margin-bottom: 15px;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.bot {
            text-align: left;
        }

        .message.user {
            text-align: right;
        }

        .message-content {
            display: inline-block;
            padding: 10px 15px;
            border-radius: 12px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .message.bot .message-content {
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        /* Botones de opciones */
        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }

        .option-button {
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .option-button:hover {
            background: #667eea;
            color: white;
        }

        /* Ãrea de input */
        #chat-input-area {
            padding: 15px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
        }

        #chat-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
            font-size: 14px;
        }

        #send-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
        }

        #send-button:hover {
            opacity: 0.9;
        }

        /* BotÃ³n de WhatsApp */
        .whatsapp-button {
            display: inline-block;
            background: #25D366;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            margin-top: 10px;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .whatsapp-button:hover {
            background: #20BA5A;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <!-- BotÃ³n flotante -->
    <div id="chatbot-button">
        <svg viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
    </div>

    <!-- Ventana del chatbot -->
    <div id="chatbot-window">
        <div id="chatbot-header">
            <h3>ğŸ® BridgeMind Assistant</h3>
            <button id="close-chat">&times;</button>
        </div>
        <div id="chat-messages"></div>
        <div id="chat-input-area">
            <input type="text" id="chat-input" placeholder="Escribe tu pregunta...">
            <button id="send-button">Enviar</button>
        </div>
    </div>

    <script>
        // Referencias a elementos del DOM
        const chatbotButton = document.getElementById('chatbot-button');
        const chatbotWindow = document.getElementById('chatbot-window');
        const closeChat = document.getElementById('close-chat');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendButton = document.getElementById('send-button');

        /* ---------------------------------------------------------
           NORMALIZAR IDIOMA (acepta es-ES, en-US, it-IT, zh-CN, etc.)
        --------------------------------------------------------- */
        function normalizeLang(code) {
            if (!code) return "es";
            code = code.toLowerCase();

            if (code.startsWith("es")) return "es";
            if (code.startsWith("en")) return "en";
            if (code.startsWith("fr")) return "fr";
            if (code.startsWith("de")) return "de";
            if (code.startsWith("it")) return "it";
            if (code.startsWith("ja")) return "ja";
            if (code.startsWith("zh")) return "zh";
            if (code.startsWith("ar")) return "ar";

            return "es";
        }

        function getLang() {
            return normalizeLang(localStorage.getItem("selectedLanguage"));
        }

        /* ---------------------------------------------------------
           BASE DE CONOCIMIENTO MULTIâ€‘IDIOMA
        --------------------------------------------------------- */
        const knowledgeBase = {
            programa: {
                es: "BridgeMindGames es un sistema de entrenamiento neuroâ€‘lingÃ¼Ã­stico basado en IA.",
                en: "BridgeMindGames is an AIâ€‘based neuroâ€‘linguistic training system.",
                fr: "BridgeMindGames est un systÃ¨me d'entraÃ®nement neuroâ€‘linguistique basÃ© sur l'IA.",
                de: "BridgeMindGames ist ein KIâ€‘basiertes neuroâ€‘linguistisches Trainingssystem.",
                it: "BridgeMindGames Ã¨ un sistema di allenamento neuroâ€‘linguistico basato sull'IA.",
                ja: "BridgeMindGames ã¯ AI ã‚’æ´»ç”¨ã—ãŸç¥çµŒè¨€èªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚",
                zh: "BridgeMindGames æ˜¯ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½çš„ç¥ç»è¯­è¨€è®­ç»ƒç³»ç»Ÿã€‚",
                ar: "BridgeMindGames Ù‡Ùˆ Ù†Ø¸Ø§Ù… ØªØ¯Ø±ÙŠØ¨ Ø¹ØµØ¨ÙŠâ€‘Ù„ØºÙˆÙŠ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ."
            },
            idiomas: {
                es: "Ofrecemos 8 idiomas: EspaÃ±ol, InglÃ©s, FrancÃ©s, Italiano, AlemÃ¡n, JaponÃ©s, Chino y Ãrabe.",
                en: "We offer 8 languages: Spanish, English, French, Italian, German, Japanese, Chinese and Arabic.",
                fr: "Nous proposons 8 langues : espagnol, anglais, franÃ§ais, italien, allemand, japonais, chinois et arabe.",
                de: "Wir bieten 8 Sprachen an: Spanisch, Englisch, FranzÃ¶sisch, Italienisch, Deutsch, Japanisch, Chinesisch und Arabisch.",
                it: "Offriamo 8 lingue: spagnolo, inglese, francese, italiano, tedesco, giapponese, cinese e arabo.",
                ja: "8ã¤ã®è¨€èªã«å¯¾å¿œã—ã¦ã„ã¾ã™ï¼šã‚¹ãƒšã‚¤ãƒ³èªã€è‹±èªã€ãƒ•ãƒ©ãƒ³ã‚¹èªã€ã‚¤ã‚¿ãƒªã‚¢èªã€ãƒ‰ã‚¤ãƒ„èªã€æ—¥æœ¬èªã€ä¸­å›½èªã€ã‚¢ãƒ©ãƒ“ã‚¢èªã€‚",
                zh: "æˆ‘ä»¬æä¾› 8 ç§è¯­è¨€ï¼šè¥¿ç­ç‰™è¯­ã€è‹±è¯­ã€æ³•è¯­ã€æ„å¤§åˆ©è¯­ã€å¾·è¯­ã€æ—¥è¯­ã€ä¸­æ–‡å’Œé˜¿æ‹‰ä¼¯è¯­ã€‚",
                ar: "Ù†Ù‚Ø¯Ù… 8 Ù„ØºØ§Øª: Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©ØŒ Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠØ©ØŒ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©ØŒ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠØ©ØŒ Ø§Ù„ØµÙŠÙ†ÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¨ÙŠØ©."
            },
            escuelas: {
                es: "Tenemos programas especializados para escuelas.",
                en: "We offer specialized programs for schools.",
                fr: "Nous proposons des programmes spÃ©cialisÃ©s pour les Ã©coles.",
                de: "Wir bieten spezialisierte Programme fÃ¼r Schulen.",
                it: "Offriamo programmi specializzati per le scuole.",
                ja: "å­¦æ ¡å‘ã‘ã®ç‰¹åˆ¥ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚",
                zh: "æˆ‘ä»¬ä¸ºå­¦æ ¡æä¾›ä¸“é—¨çš„è¯¾ç¨‹ã€‚",
                ar: "Ù„Ø¯ÙŠÙ†Ø§ Ø¨Ø±Ø§Ù…Ø¬ Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø¯Ø§Ø±Ø³."
            },
            contacto: {
                es: "Puedes contactarnos por WhatsApp o correo. Â¿Quieres que te conecte?",
                en: "You can contact us via WhatsApp or email. Want me to connect you?",
                fr: "Vous pouvez nous contacter via WhatsApp ou email. Voulezâ€‘vous que je vous connecte?",
                de: "Sie kÃ¶nnen uns Ã¼ber WhatsApp oder Eâ€‘Mail kontaktieren. Soll ich Sie verbinden?",
                it: "Puoi contattarci via WhatsApp o email. Vuoi che ti metta in contatto?",
                ja: "WhatsApp ã¾ãŸã¯ãƒ¡ãƒ¼ãƒ«ã§ãŠå•ã„åˆã‚ã›ã„ãŸã ã‘ã¾ã™ã€‚ã¤ãªãã¾ã—ã‚‡ã†ã‹ï¼Ÿ",
                zh: "æ‚¨å¯ä»¥é€šè¿‡ WhatsApp æˆ–ç”µå­é‚®ä»¶è”ç³»æˆ‘ä»¬ã€‚éœ€è¦æˆ‘å¸®æ‚¨è¿æ¥å—ï¼Ÿ",
                ar: "ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ. Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† Ø£ÙˆØµÙ„Ùƒ Ø¨Ù‡Ù…ØŸ"
            }
        };

        /* ---------------------------------------------------------
           RESPUESTAS GENERALES (VARIADAS)
        --------------------------------------------------------- */
        const generalResponses = {
            es: ["Â¿En quÃ© puedo ayudarte?", "Dime, Â¿quÃ© necesitas?", "Estoy aquÃ­ para ayudarte."],
            en: ["How can I help you?", "Tell me what you need.", "I'm here to assist you."],
            fr: ["Comment puisâ€‘je vous aider?", "Que puisâ€‘je faire pour vous?", "Je suis lÃ  pour vous aider."],
            de: ["Wie kann ich dir helfen?", "Was brauchst du?", "Ich bin hier, um dir zu helfen."],
            it: ["Come posso aiutarti?", "Di cosa hai bisogno?", "Sono qui per aiutarti."],
            ja: ["ã©ã®ã‚ˆã†ã«ãŠæ‰‹ä¼ã„ã§ãã¾ã™ã‹ï¼Ÿ", "ä½•ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ", "ãŠæ‰‹ä¼ã„ã—ã¾ã™ã€‚"],
            zh: ["æˆ‘èƒ½å¸®ä½ ä»€ä¹ˆï¼Ÿ", "ä½ éœ€è¦ä»€ä¹ˆï¼Ÿ", "æˆ‘åœ¨è¿™é‡Œä¸ºä½ æä¾›å¸®åŠ©ã€‚"],
            ar: ["ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ", "Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªØ­ØªØ§Ø¬Ù‡", "Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ"]
        };

        /* ---------------------------------------------------------
           DETECCIÃ“N DE INTENCIÃ“N
        --------------------------------------------------------- */
        function detectIntent(text) {
            text = text.toLowerCase();
            if (text.includes("program")) return "programa";
            if (text.includes("idiom") || text.includes("language")) return "idiomas";
            if (text.includes("school") || text.includes("escuela")) return "escuelas";
            if (text.includes("contact")) return "contacto";
            return "general";
        }

        /* ---------------------------------------------------------
           GENERAR RESPUESTA
        --------------------------------------------------------- */
        function getResponse(text) {
            const lang = getLang();
            const intent = detectIntent(text);

            if (intent !== "general") {
                return knowledgeBase[intent][lang];
            }

            const options = generalResponses[lang];
            return options[Math.floor(Math.random() * options.length)];
        }

        /* ---------------------------------------------------------
           MOSTRAR MENSAJES
        --------------------------------------------------------- */
        function addBotMessage(text) {
            const div = document.createElement("div");
            div.className = "message bot";
            div.innerHTML = `<div class="message-content">${text}</div>`;
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addUserMessage(text) {
            const div = document.createElement("div");
            div.className = "message user";
            div.innerHTML = `<div class="message-content">${text}</div>`;
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        /* ---------------------------------------------------------
           PROCESAR PREGUNTA
        --------------------------------------------------------- */
        function processQuestion(q) {
            const reply = getResponse(q);
            setTimeout(() => addBotMessage(reply), 300);
        }

        /* ---------------------------------------------------------
           BOTONES DE OPCIONES (si los usas)
        --------------------------------------------------------- */
        window.askAbout = function(topic) {
            addUserMessage(topic);
            processQuestion(topic);
        };

        /* ---------------------------------------------------------
           ENVIAR MENSAJE
        --------------------------------------------------------- */
        function sendMessage() {
            const q = chatInput.value.trim();
            if (!q) return;
            addUserMessage(q);
            chatInput.value = "";
            processQuestion(q);
        }

        sendButton.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        /* ---------------------------------------------------------
           BIENVENIDA MULTILINGÃœE (NO REPETITIVA)
        --------------------------------------------------------- */
        function showWelcomeMessage() {
            const lang = getLang();

            const welcomeMessages = {
                es: [
                    "Â¡Hola! ğŸ‘‹ Soy tu asistente virtual de BridgeMindGames.",
                    "Â¡Bienvenido! ğŸ‘‹ Â¿En quÃ© puedo ayudarte hoy?",
                    "Â¡Hola! ğŸ‘‹ Estoy aquÃ­ para ayudarte con lo que necesites."
                ],
                en: [
                    "Hi! ğŸ‘‹ I'm your BridgeMindGames virtual assistant.",
                    "Welcome! ğŸ‘‹ How can I help you today?",
                    "Hello! ğŸ‘‹ I'm here to assist you with anything you need."
                ],
                fr: [
                    "Bonjour ! ğŸ‘‹ Je suis votre assistant virtuel BridgeMindGames.",
                    "Bienvenue ! ğŸ‘‹ Comment puisâ€‘je vous aider aujourdâ€™hui?",
                    "Salut ! ğŸ‘‹ Je suis lÃ  pour vous aider."
                ],
                de: [
                    "Hallo! ğŸ‘‹ Ich bin dein virtueller BridgeMindGamesâ€‘Assistent.",
                    "Willkommen! ğŸ‘‹ Wie kann ich dir heute helfen?",
                    "Hi! ğŸ‘‹ Ich bin hier, um dir zu helfen."
                ],
                it: [
                    "Ciao! ğŸ‘‹ Sono il tuo assistente virtuale BridgeMindGames.",
                    "Benvenuto! ğŸ‘‹ Come posso aiutarti oggi?",
                    "Ciao! ğŸ‘‹ Sono qui per aiutarti con qualsiasi cosa."
                ],
                ja: [
                    "ã“ã‚“ã«ã¡ã¯ï¼ğŸ‘‹ BridgeMindGames ã®ãƒãƒ¼ãƒãƒ£ãƒ«ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚",
                    "ã‚ˆã†ã“ãï¼ğŸ‘‹ ä»Šæ—¥ã¯ã©ã®ã‚ˆã†ã«ãŠæ‰‹ä¼ã„ã§ãã¾ã™ã‹ï¼Ÿ",
                    "ã“ã‚“ã«ã¡ã¯ï¼ğŸ‘‹ å¿…è¦ãªã“ã¨ãŒã‚ã‚Œã°ä½•ã§ã‚‚èã„ã¦ãã ã•ã„ã€‚"
                ],
                zh: [
                    "ä½ å¥½ï¼ğŸ‘‹ æˆ‘æ˜¯ BridgeMindGames çš„è™šæ‹ŸåŠ©æ‰‹ã€‚",
                    "æ¬¢è¿ï¼ğŸ‘‹ ä»Šå¤©æˆ‘èƒ½å¸®ä½ ä»€ä¹ˆï¼Ÿ",
                    "ä½ å¥½ï¼ğŸ‘‹ æœ‰ä»»ä½•éœ€è¦æˆ‘éƒ½å¯ä»¥å¸®ä½ ã€‚"
                ],
                ar: [
                    "Ù…Ø±Ø­Ø¨Ù‹Ø§! ğŸ‘‹ Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù€ BridgeMindGames.",
                    "Ø£Ù‡Ù„Ù‹Ø§ Ø¨Ùƒ! ğŸ‘‹ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ",
                    "Ù…Ø±Ø­Ø¨Ù‹Ø§! ğŸ‘‹ Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø£ÙŠ Ø´ÙŠØ¡ ØªØ­ØªØ§Ø¬Ù‡."
                ]
            };

            const options = welcomeMessages[lang] || welcomeMessages["es"];
            const message = options[Math.floor(Math.random() * options.length)];

            addBotMessage(message);
        }

        /* ---------------------------------------------------------
           ABRIR / CERRAR CHATBOT
        --------------------------------------------------------- */
        chatbotButton.addEventListener('click', () => {
            chatbotWindow.classList.add('active');

            // Si estÃ¡ vacÃ­o, mostramos bienvenida
            if (chatMessages.children.length === 0) {
                showWelcomeMessage();
            }
        });

        closeChat.addEventListener('click', () => {
            chatbotWindow.classList.remove('active');
        });
    </script>
</body>
</html>
