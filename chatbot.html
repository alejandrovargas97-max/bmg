<style>
  #bgm-chatbot-wrapper {
    position: fixed; bottom: 20px; right: 20px; width: 350px;
    height: 550px; background: white; border-radius: 15px;
    box-shadow: 0 12px 40px rgba(0,0,0,0.3); display: flex; 
    flex-direction: column; font-family: 'Segoe UI', Arial, sans-serif; z-index: 9999;
    border: 1px solid #1a2a6c; overflow: hidden;
  }
  .chat-header { 
    background: #1a2a6c; color: white; padding: 15px; 
    display: flex; align-items: center; justify-content: space-between;
  }
  .header-info { display: flex; align-items: center; gap: 10px; }
  .status-247 { font-size: 10px; background: #27ae60; padding: 3px 8px; border-radius: 10px; font-weight: bold; }

  #chat-display { 
    flex: 1; padding: 15px; overflow-y: auto; background: #f4f7f6; 
    display: flex; flex-direction: column; gap: 12px;
  }
  .msg { padding: 10px 14px; border-radius: 18px; font-size: 13.5px; max-width: 85%; line-height: 1.5; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
  .bot-msg { background: white; align-self: flex-start; color: #333; border: 1px solid #eee; }
  .user-msg { background: #1a2a6c; align-self: flex-end; color: white; }

  .input-area { display: flex; padding: 12px; border-top: 1px solid #eee; background: white; }
  #user-text { flex: 1; border: none; outline: none; padding: 8px; font-size: 14px; }
  #send-btn { background: #1a2a6c; border: none; color: white; cursor: pointer; padding: 8px 15px; border-radius: 8px; font-weight: bold; }
</style>

<div id="bgm-chatbot-wrapper">
  <div class="chat-header">
    <div class="header-info">
      <span style="font-size: 24px;">ðŸ¤–</span>
      <div>
        <div style="font-size: 14px; font-weight: bold;">BGM Global Assistant</div>
        <div style="font-size: 10px; opacity: 0.9;">BridgeMindGames BGM</div>
      </div>
    </div>
    <span class="status-247">24/7 ONLINE</span>
  </div>
  
  <div id="chat-display">
    <div class="msg bot-msg">
      <b>Â¡Bienvenido a BridgeMindGames BGM!</b><br>
      Aprende espaÃ±ol e inglÃ©s a travÃ©s del Bridge (el ajedrez de las cartas) y la IA.<br><br>
      <i>Welcome! Learn Spanish and English through Bridge and AI.</i>
    </div>
  </div>

  <div class="input-area">
    <input type="text" id="user-text" placeholder="Escribe aquÃ­ / Type here...">
    <button id="send-btn">ENVIAR</button>
  </div>
</div>

<script>
  const display = document.getElementById('chat-display');
  const input = document.getElementById('user-text');
  const btn = document.getElementById('send-btn');

  function botLogic(text) {
    const t = text.toLowerCase();
    const hora = new Date().getHours();
    // Horario de atenciÃ³n: 7:00 AM a 11:59 PM
    const estoyEnLinea = (hora >= 7 && hora <= 23); 

    const linkWA = "https://wa.me/TUNUMERO"; // Reemplaza TUNUMERO
    const userTG = "https://t.me/TU_USUARIO"; // Reemplaza TU_USUARIO
    const idWC = "TU_ID_WECHAT"; // Reemplaza TU_ID

    // --- 1. DETECCIÃ“N DE IDIOMAS ASIÃTICOS ---
    if (/[\u4e00-\u9fa5]/.test(t)) { // CHINO
      return "æ‚¨å¥½ï¼æƒ³é€šè¿‡æ¡¥ç‰Œå­¦ä¹ è¥¿ç­ç‰™è¯­å—ï¼Ÿè¯·åœ¨ **WeChat ID: " + idWC + "** ä¸Šè”ç³»æˆ‘ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¿»è¯‘å™¨è¿›è¡Œäº¤æµã€‚";
    }
    if (/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff]/.test(t)) { // JAPONÃ‰S
      return "ã“ã‚“ã«ã¡ã¯ï¼ãƒ–ãƒªãƒƒã‚¸ã§ã‚¹ãƒšã‚¤ãƒ³èªžã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚**WhatsApp** ã§ã”é€£çµ¡ãã ã•ã„ã€‚ç¿»è¨³æ©Ÿã‚’ä½¿ã£ã¦å¯¾å¿œã—ã¾ã™ã€‚";
    }

    // --- 2. DETECCIÃ“N DE ÃRABE ---
    if (/[\u0600-\u06FF]/.test(t)) {
      return "Ù…Ø±Ø­Ø¨Ø§Ù‹! ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ© Ù…Ø¹Ù†Ø§. ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ Ø¹Ø¨Ø± **WhatsApp** ÙˆØ³Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØªØ±Ø¬Ù… Ù„Ù„Ø¨Ø¯Ø¡.";
    }

    // --- 3. FILTROS EUROPEOS ---
    if (t.includes("bonjour") || t.includes("salut") || t.includes("franÃ§ais")) {
      return "Bonjour ! Apprenez l'espagnol avec le Bridge (l'Ã©checs des cartes). Contactez-nous sur **WhatsApp** !";
    }
    if (t.includes("ciao") || t.includes("buongiorno") || t.includes("italiano")) {
      return "Ciao! Impara lo spagnolo con il Bridge. Parliamo su **WhatsApp** o **Telegram**.";
    }
    if (t.includes("hallo") || t.includes("guten tag") || t.includes("deutsch")) {
      return "Hallo! Lernen Sie Spanisch mit Bridge. Kontaktieren Sie uns per **WhatsApp**.";
    }

    // --- 4. BRIDGE, OMAR SHARIF Y METODOLOGÃA ---
    if (t.includes("bridge") || t.includes("carta") || t.includes("juego") || t.includes("omar")) {
      return "El Bridge es el <b>ajedrez de las cartas</b>. Fue la pasiÃ³n de <b>Omar Sharif</b> y en **BGM** lo usamos para despertar la mente y enseÃ±ar idiomas a cualquier edad.";
    }

    // --- 5. CONTACTO DIRECTO POR HORARIO ---
    if (t.includes("contacto") || t.includes("hablar") || t.includes("cita") || t.includes("whatsapp")) {
      if (estoyEnLinea) {
        return "<b>Â¡Estoy en lÃ­nea!</b> Hablemos directamente:<br><br>" +
               "ðŸŸ¢ <a href='"+linkWA+"' target='_blank'>WhatsApp</a><br>" +
               "ðŸ”µ <a href='"+userTG+"' target='_blank'>Telegram</a><br><br>" +
               "Podemos usar traductor si lo necesitas.";
      } else {
        return "No estoy disponible en este momento (Horario: 7:00 - 23:59). Por favor, deja tus datos en el formulario.";
      }
    }

    // --- 6. RESPUESTA POR DEFECTO ---
    return "En **BridgeMindGames BGM** creamos puentes hacia el futuro. Â¿Te interesa aprender un idioma o conocer nuestra metodologÃ­a basada en el Bridge?";
  }

  function handleSend() {
    const val = input.value.trim();
    if (!val) return;
    display.innerHTML += `<div class="msg user-msg">${val}</div>`;
    input.value = "";
    display.scrollTop = display.scrollHeight;
    setTimeout(() => {
      display.innerHTML += `<div class="msg bot-msg">${botLogic(val)}</div>`;
      display.scrollTop = display.scrollHeight;
    }, 600);
  }

  btn.onclick = handleSend;
  input.onkeypress = (e) => { if(e.key === 'Enter') handleSend(); };
</script>
