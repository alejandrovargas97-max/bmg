<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BridgeMindGames BMG | Education</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ESTILOS ORIGINALES MANTENIDOS */
        body {font-family: 'Segoe UI', Arial; margin:0; background:#f0f2f5; color:#333; padding-top: 170px !important;}
        
        header {
            position: fixed !important; top: 0 !important; left: 0 !important; width: 100% !important;
            z-index: 1000 !important; background: #007bff !important; color: white !important;
            padding: 15px 0 !important; text-align: center !important; transition: all 0.3s ease !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;
        }

        header.scrolled { padding: 8px 0 !important; background: #0056b3 !important; }
        .logo {max-width:220px; height:auto; transition: all 0.3s ease;}
        header.scrolled .logo {max-width:160px;}

        .banderas {display:flex; justify-content:center; gap:8px; flex-wrap:wrap; margin:15px;}
        .bandera {background:rgba(255,255,255,0.1); color:white; border:1px solid rgba(255,255,255,0.3); padding:8px 12px; border-radius:4px; cursor:pointer; transition: 0.3s;}
        .bandera:hover {background:white; color:#007bff;}

        main {max-width:1000px; margin:20px auto; padding:20px; background:white; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,0.08);}
        
        .imagenes {display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:15px; margin:30px 0;}
        .imagenes img {
            width: 100%; height: 150px; object-fit: cover; border-radius: 10px; 
            cursor: zoom-in; transition: transform 0.3s ease; border: 3px solid #eee;
        }
        .imagenes img:hover { transform: scale(1.03); border-color: #007bff; }

        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; background: #000; margin: 30px 0; border: 4px solid #f8f9fa; }
        .video-container video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        #visor-lupa {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center;
            cursor: zoom-out; backdrop-filter: blur(5px);
        }
        #visor-lupa img { max-width: 90%; max-height: 80%; border-radius: 8px; box-shadow: 0 0 30px rgba(255,255,255,0.2); }

        .pilares {display:grid; grid-template-columns:repeat(3,1fr); gap:20px; margin:30px 0;}
        .pilar {background:#f8f9fa; padding:20px; border-radius:10px; border-top:4px solid #007bff; text-align: center;}
        
        .formulario {background:#f1f4f9; padding:30px; border-radius:15px; border: 1px solid #dee2e6;}
        input, select, textarea { width: 100%; padding: 12px; margin-top: 5px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; }
        
        button[type="submit"] {
            background:#28a745; color:white; border:none; padding:15px; width:100%; 
            border-radius:8px; font-size:18px; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        button[type="submit"]:hover { background: #218838; transform: translateY(-2px); }

        footer { text-align:center; padding:40px; background:#1a1a1a; color:#ccc; margin-top:50px; }

        /* BOTÃ“N FLOTANTE CHATBOT */
        #chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0,123,255,0.4);
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: all 0.3s ease;
        }
        #chat-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(0,123,255,0.6);
        }

        /* MODAL CHATBOT */
        #chatbot-modal {
            display: none;
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 400px;
            height: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
            z-index: 1001;
            overflow: hidden;
        }
        
        #chatbot-modal.open {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @media (max-width:768px) {
            .pilares {grid-template-columns:1fr;}
            body {padding-top: 180px !important;}
            
            #chatbot-modal {
                bottom: 0;
                right: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border-radius: 0;
            }
            
            #chat-button {
                width: 50px;
                height: 50px;
                font-size: 24px;
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>

<header id="mainHeader">
    <img src="logo.png" alt="BridgeMindGames BMG" class="logo">
    <div class="banderas">
        <button class="bandera" onclick="cambiarIdioma('es')"><span class="flag-icon flag-icon-es"></span> ES</button>
        <button class="bandera" onclick="cambiarIdioma('en')"><span class="flag-icon flag-icon-gb"></span> EN</button>
        <button class="bandera" onclick="cambiarIdioma('fr')"><span class="flag-icon flag-icon-fr"></span> FR</button>
        <button class="bandera" onclick="cambiarIdioma('de')"><span class="flag-icon flag-icon-de"></span> DE</button>
        <button class="bandera" onclick="cambiarIdioma('it')"><span class="flag-icon flag-icon-it"></span> IT</button>
        <button class="bandera" onclick="cambiarIdioma('jp')"><span class="flag-icon flag-icon-jp"></span> JP</button>
        <button class="bandera" onclick="cambiarIdioma('zh')"><span class="flag-icon flag-icon-cn"></span> ZH</button>
        <button class="bandera" onclick="cambiarIdioma('ar')"><span class="flag-icon flag-icon-sa"></span> AR</button>
    </div>
</header>

<div id="visor-lupa" onclick="this.style.display='none'">
    <img id="img-ampliada" src="">
</div>

<main>
    <h1 id="titulo">Cargando...</h1>
    <p id="descripcion" style="text-align:center; font-size: 1.2em; color: #666;"></p>

    <div class="imagenes">
        <img src="1.jpeg" alt="BMG 1" id="img1" onclick="abrirLupa(this.src)">
        <img src="2.jpeg" alt="BMG 2" id="img2" onclick="abrirLupa(this.src)">
        <img src="3.jpg" alt="BMG 3" id="img3" onclick="abrirLupa(this.src)">
        <img src="esbr.jpg" alt="Local" id="img4" onclick="abrirLupa(this.src)">
    </div>

    <div class="video-container">
        <video controls id="videoPrincipal">
            <source id="videoSrc" src="esp.mp4" type="video/mp4">
        </video>
    </div>

    <div class="pilares" id="seccionPilares"></div>

    <div class="formulario">
        <h2 id="tituloForm">Contacto</h2>
        <form id="formulario" action="https://formsubmit.co/bridgemindgames@gmail.com" method="POST">
            <input type="hidden" name="_subject" value="BGM Nuevo Contacto">
            <div class="campo"><label id="label1">Org</label><input name="organizacion" type="text" required></div>
            <div class="campo"><label id="label2">Sec</label>
                <select name="sector" id="sector" required>
                    <option value="edu">EducaciÃ³n / Education</option>
                    <option value="tech">Tech</option>
                    <option value="salud">Salud / Health</option>
                </select>
            </div>
            <div class="campo"><label id="label4">PaÃ­s</label><input name="pais" type="text" required></div>
            <div class="campo"><label id="label6">Email</label><input name="email" type="email" required></div>
            <div class="campo"><label id="label8">Msg</label><textarea name="comentarios" rows="3"></textarea></div>
            <button type="submit" id="botonEnviar">Enviar</button>
        </form>
    </div>
</main>

<!-- BOTÃ“N FLOTANTE -->
<button id="chat-button" onclick="toggleChat()">
    ðŸ’¬
</button>

<!-- MODAL CHATBOT -->
<div id="chatbot-modal">
    <div id="chatbot-root"></div>
</div>

<footer>
    <p id="contacto">bridgemindgames@gmail.com</p>
    <p>BridgeMindGames BMG Â© 2025</p>
</footer>

<script>
    // LÃ“GICA DE LUPA
    function abrirLupa(src) {
        document.getElementById('img-ampliada').src = src;
        document.getElementById('visor-lupa').style.display = 'flex';
    }

    // SCROLL HEADER
    window.addEventListener('scroll', () => {
        const header = document.getElementById('mainHeader');
        header.classList.toggle('scrolled', window.scrollY > 50);
    });

    // TOGGLE CHATBOT
    function toggleChat() {
        const modal = document.getElementById('chatbot-modal');
        modal.classList.toggle('open');
    }

    // TUS TRADUCCIONES
    const traducciones = {
        es: { titulo: "BridgeMindGames BMG: Neuro-LingÃ¼Ã­stica", desc: "Aprendizaje acelerado mediante Bridge e IA.", video: "esp.mp4", img4: "esbr.jpg", boton: "Enviar Consulta" },
        en: { titulo: "BridgeMindGames BMG: Neuro-Linguistics", desc: "Accelerated learning through Bridge and AI.", video: "aus.mp4", img4: "enbr.jpg", boton: "Send Inquiry" },
    };

    function cambiarIdioma(id) {
        const t = traducciones[id] || traducciones['es'];
        document.getElementById('titulo').innerText = t.titulo;
        document.getElementById('descripcion').innerText = t.desc;
        document.getElementById('botonEnviar').innerText = t.boton;
        
        const video = document.getElementById('videoPrincipal');
        document.getElementById('videoSrc').src = t.video;
        video.load();
        document.getElementById('img4').src = t.img4;

        document.body.style.direction = (id === 'ar') ? 'rtl' : 'ltr';
    }

    cambiarIdioma('es');
</script>

<script type="text/babel">
    const { useState, useRef, useEffect } = React;

    const Bot = () => (<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="11" width="18" height="10" rx="2"/><circle cx="8" cy="15" r="1"/><circle cx="16" cy="15" r="1"/><path d="M9 7V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v3"/></svg>);
    const User = () => (<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>);
    const Send = () => (<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>);

    const translations = {
        es: { placeholder: 'Escribe...', greeting: 'Â¡Hola! Soy BridgeMindGames. Â¿En quÃ© puedo ayudarte?', systemPrompt: 'Eres BridgeMindGames. EspaÃ±ol. REGLA: JAMÃS digas que cubres gastos. Si preguntan demo presencial: "Demostraciones posibles pero gastos NO cubiertos por BridgeMindGames". Contacto: bridgemindgames@gmail.com WhatsApp +34634268663' },
        en: { placeholder: 'Type...', greeting: 'Hello! I\'m BridgeMindGames. How can I help?', systemPrompt: 'You are BridgeMindGames. English. RULE: NEVER say you cover expenses. If asked about demo: "Demonstrations possible but expenses NOT covered by BridgeMindGames". Contact: bridgemindgames@gmail.com WhatsApp +34634268663' },
    };

    function ChatbotApp() {
        const [language] = useState('es');
        const [messages, setMessages] = useState([{ role: 'assistant', content: translations[language].greeting }]);
        const [input, setInput] = useState('');
        const [loading, setLoading] = useState(false);
        const messagesEndRef = useRef(null);

        useEffect(() => { messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' }); }, [messages]);

        const handleSend = async () => {
            if (!input.trim() || loading) return;
            const userMessage = { role: 'user', content: input };
            setMessages(prev => [...prev, userMessage]);
            setInput('');
            setLoading(true);

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 1000,
                        system: translations[language].systemPrompt,
                        messages: [...messages, userMessage].map(msg => ({ role: msg.role, content: msg.content }))
                    })
                });
                const data = await response.json();
                setMessages(prev => [...prev, { role: 'assistant', content: data.content[0].text }]);
            } catch (error) {
                setMessages(prev => [...prev, { role: 'assistant', content: 'Error de conexiÃ³n.' }]);
            } finally {
                setLoading(false);
            }
        };

        return (
            <div className="flex flex-col h-full bg-white">
                <div className="bg-blue-600 p-3 flex items-center justify-between">
                    <h2 className="text-white font-bold flex items-center gap-2"><Bot /> BridgeMindGames</h2>
                    <button onClick={() => document.getElementById('chatbot-modal').classList.remove('open')} className="text-white text-xl">Ã—</button>
                </div>
                <div className="flex-1 overflow-y-auto p-3 space-y-3">
                    {messages.map((msg, idx) => (
                        <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                            <div className={`px-3 py-2 rounded-lg max-w-xs ${msg.role === 'user' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-800'}`}>
                                <p className="text-sm">{msg.content}</p>
                            </div>
                        </div>
                    ))}
                    {loading && <div className="flex justify-start"><div className="px-3 py-2 rounded-lg bg-gray-100"><div className="flex gap-1"><div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div><div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay:'0.1s'}}></div><div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{animationDelay:'0.2s'}}></div></div></div></div>}
                    <div ref={messagesEndRef} />
                </div>
                <div className="p-3 border-t flex gap-2">
                    <input type="text" value={input} onChange={(e) => setInput(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && handleSend()} placeholder={translations[language].placeholder} className="flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    <button onClick={handleSend} disabled={loading || !input.trim()} className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400"><Send /></button>
                </div>
            </div>
        );
    }

    ReactDOM.render(<ChatbotApp />, document.getElementById('chatbot-root'));
</script>

</body>
</html>
