<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BridgeMind Games | Official</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet">
    <style>
        body { background-color: #020617; color: #f8fafc; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .watermark { position: fixed; top: 55%; left: 50%; transform: translate(-50%, -50%); width: 70%; max-width: 600px; opacity: 0.25; z-index: -1; pointer-events: none; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .chat-container { height: 450px; scrollbar-width: thin; scrollbar-color: #4f46e5 #0f172a; }
        .media-item { cursor: zoom-in; transition: 0.3s ease; border-radius: 1rem; border: 1px solid rgba(79, 70, 229, 0.3); }
        .media-item:hover { transform: scale(1.03); border-color: #6366f1; }
        .bot-msg { background: rgba(30, 41, 59, 0.8); border-radius: 0 20px 20px 20px; border-left: 4px solid #6366f1; }
        .user-msg { background: linear-gradient(135deg, #4f46e5, #3730a3); border-radius: 20px 20px 0 20px; margin-left: auto; box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4); }
        #zoom-box { display: none; position: fixed; z-index: 1000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); align-items: center; justify-content: center; backdrop-filter: blur(10px); }
    </style>
</head>
<body>

    <img src="https://raw.githubusercontent.com/alejandrovargas97-max/bmg/main/bmg.jpg" class="watermark">

    <header class="fixed top-0 w-full z-50 glass p-4 flex justify-between items-center shadow-2xl border-b border-indigo-500/20">
        <div class="flex items-center gap-3">
            <img src="img/logo.png" alt="BMG" class="h-10"> <h1 class="font-black text-xl tracking-tighter uppercase italic">BridgeMind <span class="text-indigo-500 text-sm italic">Games</span></h1>
        </div>
        <div id="flag-box" class="flex gap-2 bg-black/40 p-2 rounded-full border border-white/5"></div>
    </header>

    <main class="pt-28 pb-20 max-w-5xl mx-auto px-6">
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
            <img src="img/foto1.jpg" class="media-item h-28 w-full object-cover" onclick="agrandar(this.src)">
            <img src="img/foto2.jpg" class="media-item h-28 w-full object-cover" onclick="agrandar(this.src)">
            <img src="img/foto3.jpg" class="media-item h-28 w-full object-cover" onclick="agrandar(this.src)">
            <div class="media-item bg-indigo-900/40 h-28 flex flex-col items-center justify-center border-2 border-dashed border-indigo-500/50" 
                 onclick="abrirVideo('vid/video.mp4')"> <span class="text-2xl">▶</span><span class="text-[9px] font-bold uppercase tracking-widest mt-1 text-indigo-300">Ver Demo</span>
            </div>
        </div>

        <div class="glass rounded-[2rem] overflow-hidden shadow-2xl border-white/10">
            <div id="chat-content" class="chat-container overflow-y-auto p-6 space-y-4 text-sm md:text-base"></div>
            <div class="p-4 bg-slate-900/80 border-t border-white/10 flex gap-3">
                <input type="text" id="user-input" class="flex-1 bg-black/40 border border-white/10 rounded-2xl p-4 outline-none focus:border-indigo-500 text-white" placeholder="Pregunta por el curso de 6 meses..." onkeypress="if(event.key==='Enter') enviar()">
                <button onclick="enviar()" class="bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-4 rounded-2xl font-bold transition-all shadow-lg">Enviar</button>
            </div>
        </div>

        <div class="mt-12 glass rounded-[2rem] p-10">
            <h2 class="text-3xl font-bold mb-2 text-indigo-400">Atención Personalizada</h2>
            <p class="text-slate-400 mb-8">Inscríbete y analizaremos tu caso en nuestra planilla.</p>
            <form id="bmg-form" class="grid md:grid-cols-2 gap-6">
                <input type="text" name="nombre" placeholder="Nombre completo" required class="bg-black/40 p-4 rounded-2xl border border-white/10 outline-none focus:border-indigo-500">
                <input type="email" name="email" placeholder="Email" required class="bg-black/40 p-4 rounded-2xl border border-white/10 outline-none focus:border-indigo-500">
                <button type="submit" id="submit-btn" class="bg-white text-black hover:bg-indigo-500 hover:text-white p-5 rounded-2xl font-black md:col-span-2 transition-all uppercase tracking-tighter">Sincronizar con Planilla</button>
            </form>
            <p id="form-msg" class="hidden mt-6 text-center text-green-400 font-bold">✓ Datos enviados con éxito.</p>
        </div>
    </main>

    <div id="zoom-box" onclick="cerrarZoom()">
        <div id="zoom-content" onclick="event.stopPropagation()">
            <img id="zoom-img" class="max-w-[90%] max-h-[85%] rounded-3xl shadow-2xl border border-white/20">
        </div>
    </div>

    <script>
        // --- CONFIGURACIÓN ---
        const GEMINI_KEY = "TU_API_KEY_AQUI"; 
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxQD5JnD_WO6M9p3kcwZ7Xx2TXxOfmOTTHkxa3IdxhbE4mZiv7b9BFejuRUIQqt2Cdp4A/exec";
        const TEL_WAPP = "34600000000"; 

        const basePrompt = `Eres BridgeMind Games. Sistema dual: Bridge + Idioma (Español/Inglés). IA genera apps y textos. Curso 6 meses. No prueba gratis. Firma contrato. Demostración presencial con gastos pagados por interesado. Pregunta niveles 0-5.`;

        const config = {
            es: { flag: 'es', hi: '¡Hola! Bienvenido. ¿Qué nivel tienes de Bridge e Idioma (0-5)?', prompt: basePrompt },
            en: { flag: 'gb', hi: 'Welcome! Bridge and Language level (0-5)?', prompt: basePrompt + " Answer in English." }
        };

        let lang = 'es';
        const chat = document.getElementById('chat-content');

        // Banderas
        Object.keys(config).forEach(k => {
            const b = document.createElement('button');
            b.innerHTML = `<span class="flag-icon flag-icon-${config[k].flag}"></span>`;
            b.className = "hover:scale-125 transition-all p-1 opacity-60";
            b.onclick = () => { lang = k; chat.innerHTML = ""; addBot(config[k].hi); };
            document.getElementById('flag-box').appendChild(b);
        });

        // Google Sheets
        document.getElementById('bmg-form').onsubmit = async (e) => {
            e.preventDefault();
            const btn = document.getElementById('submit-btn');
            btn.innerText = "Sincronizando...";
            const data = Object.fromEntries(new FormData(e.target).entries());
            try {
                await fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(data) });
                document.getElementById('bmg-form').reset();
                document.getElementById('form-msg').classList.remove('hidden');
                btn.innerText = "¡Listo!";
            } catch { alert("Error de permisos."); }
        };

        async function enviar() {
            const input = document.getElementById('user-input');
            const val = input.value.trim();
            if(!val) return;
            addUser(val);
            input.value = "";
            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_KEY}`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ contents: [{ parts: [{ text: config[lang].prompt + "\nUsuario: " + val }] }] })
                });
                const d = await res.json();
                addBot(d.candidates[0].content.parts[0].text);
            } catch {
                const h = new Date().toLocaleTimeString('es-ES', {timeZone: 'Europe/Madrid'});
                addBot(`IA ocupada. <a href="https://wa.me/${TEL_WAPP}" class="underline text-indigo-400">Contactar vía WhatsApp</a>`);
            }
        }

        function addUser(t) { chat.innerHTML += `<div class="flex"><p class="user-msg p-4 max-w-[85%]">${t}</p></div>`; scroll(); }
        function addBot(t) { chat.innerHTML += `<div class="flex"><p class="bot-msg p-4 max-w-[85%] text-slate-300">${t}</p></div>`; scroll(); }
        function scroll() { chat.scrollTop = chat.scrollHeight; }
        
        function agrandar(s) { 
            const zoomBox = document.getElementById('zoom-box');
            document.getElementById('zoom-content').innerHTML = `<img src="${s}" class="max-w-[90%] max-h-[85%] rounded-3xl shadow-2xl border border-white/20">`;
            zoomBox.style.display = 'flex'; 
        }

        function abrirVideo(v) {
            const zoomBox = document.getElementById('zoom-box');
            document.getElementById('zoom-content').innerHTML = `
                <video controls autoplay class="max-w-[90%] max-h-[85%] rounded-3xl shadow-2xl border border-white/20">
                    <source src="${v}" type="video/mp4">
                </video>`;
            zoomBox.style.display = 'flex';
        }

        function cerrarZoom() { document.getElementById('zoom-box').style.display = 'none'; }

        addBot(config[lang].hi);
    </script>
</body>
</html>
